# 贪吃蛇小游戏需求文档

## 1. 背景与目标
- 基于现有静态站点实现一个可在现代桌面/移动浏览器中运行的经典贪吃蛇小游戏。
- 通过明确的技术与交互规范保证实现质量，并为后续拓展功能留有空间。

## 2. 核心玩法
- 游戏区域使用 **20 × 20** 的方格网，每格 20px，整体区域固定为 400 × 400px。
- 贪吃蛇以网格为单位移动，初始长度 3 格，初始位置位于网格中央，面向右侧。
- 默认移动频率为 **每 150ms 更新一次位置**。难度调整应通过改变此节奏完成。
- 蛇头进入含食物的格子后：
  - 食物被吃掉，蛇身增长 1 格。
  - 立即随机生成新的食物，且新位置不得与蛇身重叠。
- 当蛇头超出边界或与自身身体重叠时触发游戏结束。

## 3. 操作方式
- 桌面端使用键盘方向键（↑ ↓ ← →）改变移动方向。
- 禁止 180° 掉头：若输入方向与当前方向相反，则忽略该输入。
- 游戏开始后，方向输入在当前帧生效，即更新移动队列。
- 移动端最少提供四方向的屏幕虚拟按钮；后续可扩展滑动手势。

## 4. 计分规则
- 初始分数为 0，每吃到一个食物增加 **10 分**。
- 计分与蛇身增长同步完成，刷新分数显示。
- 游戏结束时展示本局得分及最高分提示。
- 最高分使用浏览器 `localStorage` 持久化，键名为 `snake-high-score`：
  - 游戏初始化时读取并展示最高分，若无记录默认 0。
  - 当本局分数大于最高分时实时更新存储。
  - 读取/写入失败时在控制台输出警告，并继续游戏流程。

## 5. 界面与交互
- 页面需包含以下结构：
  - 顶部标题与一句玩法说明。
  - 居中的 400 × 400px 游戏区域（Canvas 或 DOM 网格）。
  - 实时分数、最高分显示区。
  - 控制按钮区：开始/暂停按钮、重新开始按钮（结束后可见）。
- 默认状态为“待开始”：
  - 游戏暂停，蛇静止在初始位置。
  - 开始按钮置为可点击，暂停按钮禁用。
- 点击“开始”或按方向键首次输入时进入“进行中”：
  - 开始按钮变为“暂停”，暂停按钮启用。
  - 计时器启动，蛇持续移动。
- 暂停时：
  - 停止计时器更新，界面显示“已暂停”提示，继续按钮重新开始计时。
- 游戏结束时显示覆盖层，包含本局得分、最高分及“重新开始”操作。

## 6. 技术要求
- 保持纯前端实现（HTML、CSS、JavaScript），无需依赖后端或第三方框架。
- 所有脚本集中在 `script.js`，按模块拆分（初始化、输入处理、更新循环、渲染、存储）。
- 样式集中在 `style.css`，使用 CSS 变量管理主要颜色，确保文本与背景对比度达 WCAG AA。
- 代码需配备关键逻辑注释，并在 `README.md` 中描述构建与运行方式。

## 7. 可选增强功能
- 多难度模式（通过下拉菜单选择不同刷新间隔或网格大小）。
- 音效反馈（吃到食物、暂停、游戏结束）。
- 自适应布局（在窄屏下将控制按钮排列为两列）。
- 展示最近五局分数列表或简单排行榜。

## 8. 测试与验收标准
- **功能**：验证蛇移动、吃食物增长、撞墙/撞自己判定准确；暂停恢复后状态保持一致。
- **计分**：完成一局后确认分数增加规律正确，并检查最高分持久化是否生效。
- **兼容性**：在桌面 Chrome/Firefox、移动端 Chrome/Safari 上手动检查布局与操作。
- **无障碍**：按钮具备 ARIA 标签与键盘焦点样式，颜色对比满足要求。
- 建议编写最少一套自动化单元测试（如使用 Jest）覆盖核心逻辑函数。

## 9. 项目流程
- 先实现基础玩法与 UI 框架，再接入分数展示与持久化。
- 每完成一个功能模块同步更新文档与 README，用以追踪范围变化。
- 功能开发完成后执行手动/自动化测试，整理测试记录以便回归。
